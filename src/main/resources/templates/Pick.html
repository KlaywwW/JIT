<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org" xmlns:th="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>

    <title>JIT-WIP制二线在制品管理系统</title>
    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet"/>
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet"/>
    <!-- Morris Chart Styles-->
    <link href="assets/js/morris/morris-0.4.3.min.css" rel="stylesheet"/>
    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet"/>
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- 搜索框 css-->
    <style type="text/css">
        <!--
        父级

        -->
        .fatherdiv {
            background-color: #D8D8D8;
            font-weight: bold;
            font-size: 15px;
        }

        .xianshi a {
            text-decoration: none;
        }

        .xianshi:hover {
            background-color: #C0C0C0;
        }

        .xianshi {
            background-color: #D8D8D8;
        }
    </style>
</head>

<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand" href="index.html"><i class="fa fa-comments"></i> <strong>JIT-WIP </strong></span>
        </div>

        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-messages">

                    <li>
                        <a href="#">
                            <div>
                                <strong>蔡时枚</strong>
                                <span class="pull-right text-muted">
                                        <em>Yesterday</em>
                                    </span>
                            </div>
                            <div>生产工令单已开...</div>
                        </a>
                    </li>


                    <li>
                        <a class="text-center" href="#">
                            <strong>查看全部消息...</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>

                </ul>
                <!-- /.dropdown-messages -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>制二线A段达成率</strong>
                                    <span class="pull-right text-muted">60% 达成率</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (success)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>制二线B段达成率</strong>
                                    <span class="pull-right text-muted">28% 达成率</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="28"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 28%">
                                        <span class="sr-only">28% Complete</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>制二线C段达成率</strong>
                                    <span class="pull-right text-muted">60% 达成率</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (warning)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>

                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>查看全部达成率</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-tasks -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> New Comment
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                <span class="pull-right text-muted small">12 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-envelope fa-fw"></i> Message Sent
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-tasks fa-fw"></i> New Task
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">

                    <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                    </li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                    </li>

                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
    </nav>


    <!-- 侧方导航栏 -->
    <nav class="navbar-default navbar-side" role="navigation">
        <div id="sideNav" href=""><i class="fa fa-caret-right"></i></div>
        <div class="sidebar-collapse closed">
            <ul class="nav" id="main-menu">

                <li>
                    <a class="active-menu" th:href="@{/wip}"><i class="fa fa-bar-chart-o"></i>
                        JIT生产统计</a>
                </li>

                <li>
                    <a th:href="@{/pick}"><i class="fa fa-table "></i>JIT生产数据</a>
                </li>

                <li>
                    <a href="#"><i class="fa fa-sitemap"></i>JIT生产管理<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="#">成品仓</a>
                        </li>
                        <li>
                            <a th:href="@{/link}">物料仓</a>
                        </li>
                        <li>
                            <a href="#">半成品仓<span class="fa arrow"></span></a>
                            <ul class="nav nav-third-level">

                            </ul>

                        </li>

                    </ul>
                </li>

            </ul>

        </div>

    </nav>
    <!-- /. NAV SIDE  -->
    <div id="page-wrapper">
        <div id="page-inner">


            <div class="row">
                <div class="col-md-12">
                    <h1 class="page-header">
                        JIT-WIP
                        <small>JIT在制品系统管理</small>
                    </h1>
                    <ol class="breadcrumb">
                        <li><a th:href="@{/wip}">首页</a></li>
                        <li><a th:href="@{/wipdetails}">各生产段在制</a></li>

                    </ol>
                </div>
            </div>
            <!-- 搜索框 -->


            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12" id="wip">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-5 col-sm-12 col-xs-12">
                                    <form role="form">
                                        <div class="father">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <input class="form-control" id="soushuo" placeholder="输入款号搜索进度"
                                                           type="text"/>
                                                </div>
                                                <div class="col-md-4">
                                                    <label style="display: none;color: red" id="textInfo"></label>
                                                </div>
                                            </div>


                                            <div class="row">
                                                <div class="col-md-8">
                                                    <div th:if="${session.search!=null}"
                                                         th:each="erpSp,Stater:${session.search}">
                                                        <div class="xianshi">
                                                            <input hidden="hidden" th:value="${erpSp.sp_id}"/>
                                                            <a th:href="@{/findErpSPJindu(id=${erpSp.sp_id},spNo=${erpSp.sp_No})}"
                                                               th:text="${erpSp.sp_No}+'---'+${erpSp.sp_Name}"></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-md-3	 col-sm-12 col-xs-12">
                                    <form role="form">
                                        <select name="dataTable_length" aria-controls="dataTable" class="form-control"
                                                id="typeInfo">
                                            <option value="制二" selected="selected">制二线在制品明细</option>
                                            <option value="制六">制六线在制品明细</option>
                                            <option value="制九">制九线在制品明细</option>
                                            <option value="制三">制三线在制品明细</option>
                                        </select>

                                    </form>
                                </div>

                                <div class="col-md-1 col-sm-12 col-xs-12">
                                    <button class="btn btn-primary" id="seachInfo"><i class="fa fa-edit "></i>查询
                                    </button>
                                </div>
                                <div class="col-md-2 col-sm-12 col-xs-12">
                                    <button class="btn btn-success" id="excelExport"><i class="fa fa-file-text-o"
                                                                                        aria-hidden="true">导出</i>
                                    </button>
                                </div>
                            </div><!-- row -->

                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 col-sm-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">

                        </div>
                        <div class="panel-body">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#home" data-toggle="tab">皮夹线在制明细总览</a>
                                </li>
                                <li class=""><a href="#profile" data-toggle="tab">台湾在制</a>
                                </li>
                                <li class=""><a href="#messages" data-toggle="tab">东莞在制</a>
                                </li>
                                <li class=""><a href="#settings" data-toggle="tab"></a>
                                </li>
                            </ul>

                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="home">
                                    <br/>


                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h3></h3>


                                                </div>
                                                <div class="panel-body">
                                                    <div class="table-responsive">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <table class="table">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>工令单单号</th>
                                                                        <th>客户订单号</th>
                                                                        <th>产品编码</th>
                                                                        <th>产品名称</th>
                                                                        <th>计划数量</th>
                                                                        <th>入库数量</th>
                                                                        <th>开工令单时间</th>
                                                                        <th>生产单位</th>
                                                                        <th>出货地点</th>
                                                                        <th>在制金额明细查询
                                                                        <th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr class="danger" th:if="${session.wipPlans!=null}"
                                                                        th:each="mpsPlan,terStat:${session.wipPlans}">
                                                                        <td th:text="${mpsPlan.Plan_No}"></td>
                                                                        <td th:text="${mpsPlan.sCP_NOs}"></td>
                                                                        <td th:text="${mpsPlan.sp_No}"></td>
                                                                        <td th:text="${mpsPlan.Sp_Name}"></td>
                                                                        <td th:text="${mpsPlan.Plan_Quan}"></td>
                                                                        <td th:text="${mpsPlan.In_Quan}"></td>
                                                                        <td th:text="${#dates.format(mpsPlan.Plan_Date,'yyyy-MM-dd')}"></td>
                                                                        <td th:text="${session.sc}"></td>
                                                                        <td th:text="${mpsPlan.Brief}"></td>

                                                                        <td><a class="btn btn-primary"
                                                                               th:href="@{/findwipMoney(id=${mpsPlan.plan_id},No=${mpsPlan.sp_No})}">查询</a>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>

                                                        </div><!-- row -->
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <div class="tab-pane fade" id="profile">
                                    <br/>
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12" id="wip">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">

                                                </div>
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-md-2">
                                                                <label>工单数量:</label><label
                                                                    th:text="${session.taiwan.size()}"></label>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label>计划数量:</label><label
                                                                    th:text="${session.taiwanOut}"></label>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label>入库数量：</label><label
                                                                    th:text="${session.taiwanIn}"></label>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <label style="color: red">在制数量:</label><label
                                                                    style="color: red"
                                                                    th:text="${session.taiwanSum}"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">

                                                    <h5>台湾在制</h5>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="table-responsive">
                                                        <table class="table">

                                                            <thead>
                                                            <tr>

                                                                <th>工令单单号</th>
                                                                <th>客户订单号</th>
                                                                <th>产品编码</th>
                                                                <th>产品名称</th>
                                                                <th>计划数量</th>
                                                                <th>入库数量</th>
                                                                <th>开工令单时间</th>
                                                                <th>生产单位</th>
                                                                <th>状态</th>
                                                                <th>出货单位</th>

                                                                <th>在制金额明细查询
                                                                <th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            <tr class="success" th:if="${session.taiwan!=null}"
                                                                th:each="mpsPlan,terStat:${session.taiwan}">
                                                                <td th:text="${mpsPlan.Plan_No}"></td>
                                                                <td th:text="${mpsPlan.sCP_NOs}"></td>
                                                                <td th:text="${mpsPlan.sp_No}"></td>
                                                                <td th:text="${mpsPlan.Sp_Name}"></td>
                                                                <td th:text="${mpsPlan.Plan_Quan}"></td>
                                                                <td th:text="${mpsPlan.In_Quan}"></td>
                                                                <td th:text="${#dates.format(mpsPlan.Plan_Date,'yyyy-MM-dd')}"></td>
                                                                <th th:text="${session.sc}"></th>
                                                                <td>台湾在制</td>
                                                                <td th:text="${mpsPlan.Brief}"></td>
                                                                <td><a class="btn btn-primary"
                                                                       th:href="@{/findwipMoney(id=${mpsPlan.plan_id},No=${mpsPlan.sp_No})}">查询</a>
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                        <div class="table-responsive">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                        <!-- /. PAGE INNER  -->
                                    </div>


                                </div>
                                <div class="tab-pane fade" id="messages">
                                    <br/>
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12" id="wip">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">

                                                </div>
                                                <div class="panel-body">
                                                    <div class="row">
                                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-md-2">
                                                                <label>工单数量:</label><label
                                                                    th:text="${session.scList.size()}"></label>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label>计划生产数量:</label><label
                                                                    th:text="${session.scOut}"></label>
                                                            </div>

                                                            <div class="col-md-2">
                                                                <label>入库数量：</label><label
                                                                    th:text="${session.scIn}"></label>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <label style="color: red">在制数量:</label><label
                                                                    style="color: red"
                                                                    th:text="${session.scSum}"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">

                                                    <h5>东莞在制</h5>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="table-responsive">
                                                        <table class="table">

                                                            <thead>
                                                            <tr>
                                                                <th>工令单单号</th>
                                                                <th>客户订单号</th>
                                                                <th>产品编码</th>
                                                                <th>产品名称</th>
                                                                <th>计划数量</th>
                                                                <th>入库数量</th>
                                                                <th>开工令单时间</th>
                                                                <th>生产单位</th>
                                                                <th>状态</th>
                                                                <th>出货信息</th>
                                                                <th>在制金额查询
                                                                </th>
                                                                <th>生成产品二维码
                                                                </th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            <tr class="info" th:if="${session.scList!=null}"
                                                                th:each="mpsPlan,terStat:${session.scList}">
                                                                <td th:text="${mpsPlan.Plan_No}"></td>
                                                                <td th:text="${mpsPlan.sCP_NOs}"></td>
                                                                <td th:text="${mpsPlan.sp_No}"></td>
                                                                <td th:text="${mpsPlan.Sp_Name}"></td>
                                                                <td th:text="${mpsPlan.Plan_Quan}"></td>
                                                                <td th:text="${mpsPlan.In_Quan}"></td>
                                                                <td th:text="${#dates.format(mpsPlan.Plan_Date,'yyyy-MM-dd')}"></td>
                                                                <th th:text="${session.sc}"></th>
                                                                <td>东莞在制</td>
                                                                <td th:text="${mpsPlan.Brief}"></td>
                                                                <td><a class="btn btn-primary"
                                                                       th:href="@{/findwipMoney(id=${mpsPlan.plan_id},No=${mpsPlan.sp_No})}">查询</a>
                                                                </td>
                                                                <td>
                                                                    <a class="btn btn-info"
                                                                       th:href="@{/qrinfo(plan_No=${mpsPlan.Plan_No})}">生成二维码</a>
                                                                </td>
                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                        <div class="table-responsive">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                        <!-- /. PAGE INNER  -->
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>


            <!-- /. ROW  -->


            <!-- /. PAGE WRAPPER  -->

        </div>
    </div>


    <script src="assets/js/jquery-1.10.2.js"></script>
    <!-- Bootstrap Js -->
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Metis Menu Js -->
    <script src="assets/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="assets/js/easypiechart.js"></script>
    <!-- Custom Js -->
    <script src="assets/echarts/echarts.min.js"></script>

    <script src="assets/js/myjs.js"></script>

    <script>
        //查询某一款的进度
        $(function () {
            var paths="http://192.168.123.86:778";

            $("#sideNav").addClass('closed');
            $('.navbar-side').animate({left: '-260px'});
            $('#page-wrapper').animate({'margin-left': '0px'});


            $("#soushuo").keyup(function () {
                var spNo = $("#soushuo").val();
                //正则表达式判断 btNo的内容   判断为4位数以上
                if (/^.{5,20}$/.test(spNo)) {
                    var bool = /[\u4E00-\u9FA5]/g.test(spNo);
                    //正则表达式判断 btNo的内容   判断为非汉字
                    if (!bool) {

                        $.ajax({
                            url: paths+"/findErpSP",
                            data: {"spNo": spNo},
                            dataType: "text",
                            success: function (data) {
                                if (data == "OK") {
                                    $("#textInfo").css('display', 'inline-block');
                                    $("#textInfo").val("正在查询请稍等...")
                                    setTimeout(function () {
                                        window.location.reload();
                                    }, 2000);
                                    $("#soushuo").val(spNo);
                                } else {
                                    $("#textInfo").css('display', 'inline-block');
                                    $("#textInfo").text("没有此单号的相关数据");
                                    $("#textInfo").css({"font-color": "#FF6A6A"});
                                }

                            },
                            error: function (er) {
                                console.log(er);
                                $("#textInfo").css('display', 'inline-block');
                                $("#textInfo").val("查询失败:请联系mis");
                                $("#textInfo").css({"font-color": "#FF6A6A"});
                            }
                        })//ajax
                    } else {
                        $("#textInfo").css('display', 'inline-block');
                        $("#textInfo").text("请输入数字和字母！禁止输入中文")
                    }
                } else {
                    $("#textInfo").css('display', 'inline-block');
                    $("#textInfo").text("请输入5位以上数字")

                }


            });

            $("#seachInfo").click(function () {
                var Brief = $("#typeInfo").val();
                $.ajax({
                    url: paths+"/pick",
                    data: {"Brief": Brief},
                    dataType: "text",
                    success: function (data) {
                        console.log("OK");
                        location.reload();
                    },
                    error: function (er) {
                        console.log(er);
                    }
                })//ajax

            })

            $("#excelExport").click(function () {
                window.location.href = paths+"/excel"
            })


        })


    </script>


</body>

</html>